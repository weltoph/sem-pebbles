\documentclass{beamer}

\usepackage[utf8]{inputenc}
\usepackage{epigraph}
\usepackage{tikz}
\usepackage{csquotes}
\usepackage{xcolor}

\input{tikz/settings}

\usetheme{metropolis}
\metroset{numbering=fraction}

\DeclareMathOperator{\din}{\delta_{\mathit{in}}}
\DeclareMathOperator{\dout}{\delta_{\mathit{out}}}
\DeclareMathOperator{\Tid}{T_{\text{id}}}
\DeclareMathOperator{\Tsteps}{T_{\text{steps}}}
\DeclareMathOperator{\Twalk}{T_{\text{walk}}}
\DeclareMathOperator{\Thead}{T_{\text{head}}}

\title{Undirected Graph Exploration with $\Theta(\log\log n)$ Pebbles}
\subtitle{A Grimm idea}
\author{Christoph Welzel}
\institute{Logik und Theorie diskreter Systeme, RWTH Aachen}

\begin{document}
% \tikzexternalize
\maketitle
\begin{frame}
  \frametitle{Motivation}
  \begin{itemize}
    \item Exploration of huge finite graphs with bounded degree by agents
    \item Agents are entities which are located on a vertex and can move along
      an edge
    \item Agents can drop markers on vertices
    \item Agent \emph{explores} a graph by deterministically visiting all of
      its vertices
  \end{itemize}
\end{frame}

\section{Preliminaries}
\begin{frame}
  \frametitle{Huge graphs}
  \begin{columns}
    \column{0.5\textwidth}
    \begin{itemize}
      \item Finite, but huge
      \item Undirected
      \item Indistinguishable vertices
      \item Bounded degree ($\Delta$)
      \item Edges can locally be enumerated as $0,\dots,\Delta-1$
        (Port)
    \end{itemize}
    \column{0.5\textwidth}
    \begin{center}
      \resizebox{\textwidth}{!}{\input{tikz/portex}}
    \end{center}
  \end{columns}
\end{frame}

\begin{frame}
  \frametitle{Agents}
  \begin{columns}
    \column{0.5\textwidth}
    \begin{itemize}
      \item Agent carries set of distinguishable pebbles
      \item Formalisation as pebble-machines
        \begin{itemize}
          \item $(Q,F,P,m,\delta,\din,\dout,q_{0})$
          \item $P$: set of pebbles
          \item $m$: length of the used memory tape
          \item $\din$: formalisation of agent entering
          \item $\dout$ formalisation of agent leaving
        \end{itemize}
    \end{itemize}
    \column{0.5\textwidth}
    \begin{itemize}
      \item As an agent moves on a vertex it observes:
        \begin{itemize}
          \item Pebbles it carries
          \item Pebbles lying on the vertex
          \item Degree of vertex
        \end{itemize}
      \item Agent executes a computation on a vertex to determine:
        \begin{itemize}
          \item Port to leave
          \item Pebbles to leave behind
          \item Pebbles to carry with it
        \end{itemize}
    \end{itemize}
  \end{columns}
\end{frame}


\begin{frame}
  \frametitle{Exploration sequence}
  \begin{columns}
    \column{0.5\textwidth}
    \begin{itemize}
      \item Describe movement of agent by relative movements:
        \begin{itemize}
          \item An exploration sequence has the form $e_{1},\dots, e_{n}$
          \item For a vertex $v$ with degree $d_{v}$ which is entered on port
            $p$ is left through port $p + e_{i}\mod d_{v}$
          \item An exploration sequence is called \emph{universial} for a class
            of graphs if following it explores any graph of that class
          \item<2->[$\rightarrow$] Example:
            $\alt<3-3>{\colorbox{green}{1}}{\colorbox{white!0}{1}},
            \alt<4-4>{\colorbox{green}{3}}{\colorbox{white!0}{3}},
            \alt<5-5>{\colorbox{green}{2}}{\colorbox{white!0}{2}},
            \alt<6-6>{\colorbox{green}{2}}{\colorbox{white!0}{2}}$
        \end{itemize}
    \end{itemize}
    \column{0.5\textwidth}
    \begin{center}
      \resizebox{\textwidth}{!}{\input{tikz/moveex}}
    \end{center}
  \end{columns}
\end{frame}

\section{Graph traversal}
\begin{frame}
  \frametitle{Exploring pebble machine}
  \begin{theorem}[Reingold]
    There is an $\mathcal{O}(n)$-space algorithm producing a universal
    exploration sequence for any regular graph on $n$ vertices.
  \end{theorem}
  \begin{center}
    \begin{tikzpicture}
      \node (d1) {};
      \node[below=2 of d1] (d2) {};
      \draw[decorate,decoration={snake,amplitude=0.3cm, segment length=1cm},->]
        (d1) to (d2);
    \end{tikzpicture}
  \end{center}
  \begin{theorem}
    There exists a $(\mathcal{O}(1), 0, \mathcal{O}(\log n))$-pebble machine
    that moves along a closed walk and either explores the graph or visits at
    least $n$ distinct vertices, for any graph with bounded degree.
  \end{theorem}
\end{frame}
\begin{frame}
  \frametitle{Closed walk}
  \begin{lemma}
    An agent following an exploration sequence of the form
    $(e_{1},\dots,e_{k})^{\ast}$ moves along a closed walk.
  \end{lemma}
  \begin{itemize}
    \item Examine triples $(v,\ell,i)$:
      \begin{itemize}
        \item $v$: current vertex
        \item $\ell$: port agent entered $v$ through
        \item $i$: next step of the exploration sequence
      \end{itemize}
    \item Deterministically $(v,\ell,i) \leadsto (v',\ell',i')$
    \item If $t_{1} = (v',\ell',i') \leadsto (v,\ell,i)$ and
      $t_{2} = (v'',\ell'',i'') \leadsto (v,\ell,i)$: $t_{1} = t_{2}$
    \item Only finite triples: projection to vertices yields closed walk
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Universal exploration of $3$-regular graphs}
  \begin{lemma}
    There exists an $\mathcal{O}(\log n)$-space algorithm producing a universal
    exploration sequence $(e_{1},\dots,e_{k})^{\ast}$ for any $3$-regular graph
    with at most $n$ vertices.
  \end{lemma}
  \begin{itemize}
    \item Let $\mathcal{M}$ be the Turing machine from Reingold's Theorem
    \item The exploration sequence computed by $\mathcal{M}$ is universial for
      3-regular graphs with at most $n$ vertices
      \alt<1-1>{
        \begin{itemize}
          \item Assume $3$-regular $G_{0}$ with $n_{0} < n$ vertices is not
            explored
          \item Then there is a vertex that is not traversed
          \item Repeatedly apply \parbox{3\baselineskip}{\resizebox{!}
            {3\baselineskip}{\input{tikz/blowup}}}
          \item Until there are $n$ vertices which contradicts Reingold's
            Theorem
        \end{itemize}
      }{
      \item Produce a periodic universal exploration sequence
        $(e_{1},\dots,e_{k})^{\ast}$
        \begin{itemize}
          \item Construct $\mathcal{M}'$ which simulates $\mathcal{M}$ for
            $3n\cdot c$ steps where $c$ is the number of configurations of $M$
          \item Output $e = (e_{1},\dots,e_{k})^{\ast}$
          \item Assume $e$ is not universal; then it loops in $V'$ with
            $|V'|<n$
          \item $\mathcal{M}$ has to enter a vertex twice with the same
            configuration
          \item Contradicts universality of the exploration sequence of
            $\mathcal{M}$
        \end{itemize}
      }
  \end{itemize}
  \pause
\end{frame}

\begin{frame}
  \frametitle{Exploring pebble machine}
  \begin{columns}
    \column{0.5\textwidth}
    \begin{itemize}
      \item<2-> Establish 3-regularity
        \begin{itemize}
          \item Transform $v$ to $3\cdot d_{v}$ distinct vertices
        \end{itemize}
      \item<4-> Use Reingold's algorithm and take first $k = 3n\cdot c$ ($c$ number of
        configurations $M_{A}$)
    \end{itemize}
    \column{0.5\textwidth}
    \uncover<3->{\resizebox{\textwidth}{!}{\input{tikz/regsim}}}
  \end{columns}
\end{frame}

\section{Simulation}
\begin{frame}
  \frametitle{Tape simulation via pebbles}
  \begin{itemize}
    \item Simulate tape of size $m$ by pebbles:
      \begin{itemize}
        \item<3-> Separate into memory blocks of size $m_{1}$
        \item<4-> Represent every block by one of $\left\{p_{0},\dots,p_{\frac{m}{m_{1}}-1}\right\}$ pebbles
      \end{itemize}
  \end{itemize}
  \uncover<2->{\input{tikz/tapesimint}}
\end{frame}

\begin{frame}
  \frametitle{Tape simulation via pebbles}
  \input{tikz/tapesimpebsep}
  \begin{columns}
    \column{0.5\textwidth}
    \begin{itemize}
      \item Every pebbles needs $2^{m_{1}}$ distinct \enquote{states}
        \begin{itemize}
          \item Placement on a walk with at least $2^{m_{1}}$ distinct vertices
            yields \enquote{states}
        \end{itemize}
    \end{itemize}
    \column{0.5\textwidth}
    \resizebox{\textwidth}{!}{\input{tikz/tapesimwalk}}
  \end{columns}
\end{frame}

\begin{frame}
  \frametitle{Mechanisms of simulation}
  \begin{itemize}
    \item Simulation of $M_{\text{Walk}}$ which explores at least $2^{m_{1}}$
      distinct vertices
    \item Identify \emph{distinct} vertices of the walk
    \item Read from and write to simulated tape
    \item Preserve tape content through steps of simulated agent
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Simulation of $M_{\text{Walk}}$}
  \begin{itemize}
    \item $M_{\text{Walk}}$ can be implemented as
      $(\mathcal{O}(1), 0, \mathcal{O}(m_{1}))$ pebble machine
    \item Used variables/pebbles:
      \begin{itemize}
        \item $\Twalk$: stores $M_{\text{Walk}}$'s tape
        \item $\Tsteps$: stores number of taken steps
        \item $\Tid$: stores number of visited distinct vertices
        \item $p_{\text{start}}$: marks the beginning
      \end{itemize}
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Finding distinct vertices}
  Problem: Indistinguishable vertices $\leadsto$ next vertex \enquote{new}?
  \begin{columns}
    \column{0.5\textwidth}
    Solution:
    \begin{enumerate}
      \item Execute step
      \item Drop pebble $p_{\text{tmp}}$
      \item Store $\Twalk$ in $T'_{\text{walk}}$
      \item Restart $M_{\text{Walk}}$
      \item Execute steps until $p_{\text{tmp}}$ is observed
      \item If $\Twalk = T'_{\text{walk}}$ the vertex is new
      \item Otherwise start over
    \end{enumerate}
    \column{0.5\textwidth}
    \input{tikz/disvert}
  \end{columns}
\end{frame}

\begin{frame}
  \frametitle{Memory management}
  \begin{columns}
    \column{0.5\textwidth}
    \begin{itemize}
      \item $\Thead$ stores head position
      \item $p_{\lfloor\frac{\Thead}{m_{1}}\rfloor}$: pebble of memory block
      \item $\mathit{off} = \Thead\mod m_{1}$: offset in memory block
      \item Reading:
        \begin{itemize}
          \item Retrieve encoding pebble
          \item Return bit with offset
        \end{itemize}
      \item Writing:
        \begin{itemize}
          \item Read bit
          \item On bit-flip move encoding pebble $2^{\mathit{off}}$ bits up or down
        \end{itemize}
    \end{itemize}
    \column{0.5\textwidth}
    \resizebox{\textwidth}{!}{\input{tikz/tapesimpebsep}}
    \resizebox{\textwidth}{!}{\input{tikz/tapesimwalk}}
  \end{columns}
\end{frame}

\begin{frame}
  \frametitle{Memory management: Writing}
  \begin{itemize}
    \item Read bit
    \item On bit-flip: move pebble
  \end{itemize}
  \resizebox{\textwidth}{!}{\input{tikz/bitwrite}}
\end{frame}

\begin{frame}
  \frametitle{Simulation}
  \begin{theorem}
    For every graph $G$ a $(s,p,2m)$ pebble machine $M$ can be simulated by a
    $(cs,p+c,m)$ pebble machine that simulates the walk of $M$ on $G$ or
    explores $G$.
  \end{theorem}
  \begin{itemize}
    \item There is a $(c,0,c\cdot\log n)$ pebble machine which explores
      a graph $G$ with $n$ vertices
    \item Applying above simulation $\log \log n$ times yields:
      \begin{theorem}
        For every Graph $G$ with $n$ vertices there is a
        $(c'^{\log\log n}\cdot c, \log\log n\cdot c', c)$ pebble machine
        which explores $G$.
      \end{theorem}
  \end{itemize}
\end{frame}

\section{Limitations of pebble machines}
\begin{frame}
  \frametitle{Limitations of pebbles}
  \begin{itemize}
    \item Construct graphs which cannot be traversed by agents with $p$ pebbles
    \item Such graphs are called $p$-barriers
      \begin{center}
        \resizebox{0.3\textwidth}{!}{\input{tikz/barrier}}
      \end{center}
    \item In the following: inductive construction of barriers
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Locality gadget}
  \begin{itemize}
    \item Replace edge by a $(p-1)$-barrier
    \item Enforce \enquote{locality} of pebbles
    \item An agent cannot traverse any gadget without \emph{all} his pebbles
    \item All pebbles of the agent are either carried or placed within the
      adjacent gadgets
  \end{itemize}
  \begin{center}
    \uncover<2->{\resizebox{0.8\textwidth}{!}{\input{tikz/locgadget}}}
  \end{center}
\end{frame}

\begin{frame}
  \frametitle{Barrier construction: Initial thoughts}
  \begin{columns}
    \column{0.5\textwidth}
    \begin{itemize}
      \item Consider a subset of pebbles of cardinality $p$
      \item Use the locality gadget as edges
      \item Since pebbles are local: enumerate configurations in macro vertex
        $C_{1},\dots,C_{\alpha}$
      \item Project $A$ to a agent without pebbles $B$
      \item $B$ has $\alpha$ states and traverses through macro vertices
    \end{itemize}
    \column{0.5\textwidth}
    \resizebox{\textwidth}{!}{\input{tikz/projection}}
  \end{columns}
\end{frame}

\begin{frame}
  \frametitle{Barrier construction: The real deal}
  \begin{itemize}
    \item $B$ has no pebbles and is therefore prone to a $0$-barrier
    \item Apply locality gadget to all edges
    \item This yields a $p$-barrier for the chosen subset of pebbles
    \item Iterate $p$-barriers for all possible subsets
  \end{itemize}
  \begin{center}
    \resizebox{0.8\textwidth}{!}{\input{tikz/iterbarrier}}
  \end{center}
\end{frame}

\begin{frame}
  \begin{center}
    \Huge Thank you for your attention.
  \end{center}
\end{frame}

\end{document}
